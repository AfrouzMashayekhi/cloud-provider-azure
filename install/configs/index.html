<!doctype html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.61.0"><meta name=ROBOTS content="NOINDEX, NOFOLLOW"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/cloud-provider-azure/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/cloud-provider-azure/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/cloud-provider-azure/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/cloud-provider-azure/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/cloud-provider-azure/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/cloud-provider-azure/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/cloud-provider-azure/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/cloud-provider-azure/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/cloud-provider-azure/favicons/android-192x192.png sizes=192x192><title>Configure Cloud Provider | Cloud Provider Azure</title><meta property="og:title" content="Configure Cloud Provider"><meta property="og:description" content="The configurations for Cloud Provider Azure."><meta property="og:type" content="article"><meta property="og:url" content="https://nilo19.github.io/cloud-provider-azure/install/configs/"><meta property="article:modified_time" content="2020-08-17T12:13:17+08:00"><meta property="og:site_name" content="Cloud Provider Azure"><meta itemprop=name content="Configure Cloud Provider"><meta itemprop=description content="The configurations for Cloud Provider Azure."><meta itemprop=dateModified content="2020-08-17T12:13:17+08:00"><meta itemprop=wordCount content="1832"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Configure Cloud Provider"><meta name=twitter:description content="The configurations for Cloud Provider Azure."><link rel=preload href=/cloud-provider-azure/scss/main.min.125f72e5d5a3aa7d4039aab0c22c38a18b1796f8d41a399c1dbc59e50f290ecd.css as=style><link href=/cloud-provider-azure/scss/main.min.125f72e5d5a3aa7d4039aab0c22c38a18b1796f8d41a399c1dbc59e50f290ecd.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.5.1.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script></head><body class=td-page><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/cloud-provider-azure/><span class=navbar-logo></span><span class="text-uppercase font-weight-bold">Cloud Provider Azure</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class="nav-link active" href=/cloud-provider-azure/install/><span class=active>Installation</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/cloud-provider-azure/development/><span>Development</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/cloud-provider-azure/topics/><span>Topics</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/cloud-provider-azure/contribute/><span>Contribution</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/cloud-provider-azure/example/><span>Example</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/cloud-provider-azure/blog/><span>Release Notes</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/cloud-provider-azure/faq/><span>FAQ</span></a></li></ul></div><div class="navbar-nav d-none d-lg-block"></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><form class="td-sidebar__search d-flex align-items-center"><button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="collapse td-sidebar-nav" id=td-section-nav><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/cloud-provider-azure/install/ class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__section">Installation</a></li><ul><li class="collapse show" id=cloud-provider-azure-install><a class="td-sidebar-link td-sidebar-link__page active" id=m-cloud-provider-azure-install-configs href=/cloud-provider-azure/install/configs/>Configurations</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-cloud-provider-azure-install-azure-ccm href=/cloud-provider-azure/install/azure-ccm/>Azure Cloud Controller Manager</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-cloud-provider-azure-install-azuredisk href=/cloud-provider-azure/install/azuredisk/>AzureDisk</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-cloud-provider-azure-install-azurefile href=/cloud-provider-azure/install/azurefile/>AzureFile</a></li></ul></ul></nav></div></div><div class="d-none d-xl-block col-xl-2 td-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"><a href=https://github.com/kubernetes-sigs/cloud-provider-azure/edit/master/content/en/install/configs.md target=_blank><i class="fa fa-edit fa-fw"></i>Edit this page</a>
<a href="https://github.com/kubernetes-sigs/cloud-provider-azure/issues/new?title=Configure%20Cloud%20Provider" target=_blank><i class="fab fa-github fa-fw"></i>Create documentation issue</a>
<a href=https://github.com/kubernetes-sigs/cloud-provider-azure/issues/new target=_blank><i class="fas fa-tasks fa-fw"></i>Create project issue</a></div><nav id=TableOfContents><ul><li><a href=#auth-configs>Auth configs</a></li><li><a href=#cluster-config>Cluster config</a><ul><li><a href=#primaryavailabilitysetname>primaryAvailabilitySetName</a></li><li><a href=#primaryscalesetname>primaryScaleSetName</a></li><li><a href=#excludemasterfromstandardlb>excludeMasterFromStandardLB</a></li><li><a href=#setting-azure-cloud-provider-from-kubernetes-secrets>Setting Azure cloud provider from Kubernetes secrets</a></li><li><a href=#per-client-rate-limiting>per client rate limiting</a></li></ul></li><li><a href=#run-kubelet-without-azure-identity>Run Kubelet without Azure identity</a></li><li><a href=#azure-stack-configuration>Azure Stack Configuration</a></li><li><a href=#host-network-resources-in-different-aad-tenant-and-subscription>Host Network Resources in different AAD Tenant and Subscription</a></li><li><a href=#current-default-rate-limiting-values>Current default rate-limiting values</a></li></ul></nav></div><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><nav aria-label=breadcrumb class="d-none d-md-block d-print-none"><ol class="breadcrumb spb-1"><li class=breadcrumb-item><a href=https://nilo19.github.io/cloud-provider-azure/install/>Installation</a></li><li class="breadcrumb-item active" aria-current=page><a href=https://nilo19.github.io/cloud-provider-azure/install/configs/>Configurations</a></li></ol></nav><div class=td-content><h1>Configure Cloud Provider</h1><div class=lead>The configurations for Cloud Provider Azure.</div><p>This doc describes cloud provider config file, which is to be used via the <code>--cloud-config</code> flag of azure-cloud-controller-manager.</p><p>Here is a config file sample:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=color:#000;font-weight:700>{</span>
    <span style=color:#204a87;font-weight:700>&#34;cloud&#34;</span><span style=color:#000;font-weight:700>:</span><span style=color:#4e9a06>&#34;AzurePublicCloud&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;tenantId&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;0000000-0000-0000-0000-000000000000&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;aadClientId&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;0000000-0000-0000-0000-000000000000&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;aadClientSecret&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;0000000-0000-0000-0000-000000000000&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;subscriptionId&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;0000000-0000-0000-0000-000000000000&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;resourceGroup&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&lt;name&gt;&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;location&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;eastus&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;subnetName&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&lt;name&gt;&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;securityGroupName&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&lt;name&gt;&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;vnetName&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&lt;name&gt;&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;vnetResourceGroup&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;routeTableName&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&lt;name&gt;&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;primaryAvailabilitySetName&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&lt;name&gt;&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;routeTableResourceGroup&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&lt;name&gt;&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;cloudProviderBackoff&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;useManagedIdentityExtension&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;useInstanceMetadata&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>true</span>
<span style=color:#000;font-weight:700>}</span>
</code></pre></div><p>Note: All values are of type <code>string</code> if not explicitly called out.</p><h2 id=auth-configs>Auth configs</h2><table><thead><tr><th>Name</th><th>Description</th><th>Remark</th></tr></thead><tbody><tr><td>cloud</td><td>The cloud environment identifier</td><td>Valid values could be found <a href=https://github.com/Azure/go-autorest/blob/v9.9.0/autorest/azure/environments.go#L29>here</a>. Default to <code>AzurePublicCloud</code>.</td></tr><tr><td>tenantID</td><td>The AAD Tenant ID for the Subscription that the cluster is deployed in</td><td><strong>Required</strong>.</td></tr><tr><td>aadClientID</td><td>The ClientID for an AAD application with RBAC access to talk to Azure RM APIs</td><td>Used for service principal authn.</td></tr><tr><td>aadClientSecret</td><td>The ClientSecret for an AAD application with RBAC access to talk to Azure RM APIs</td><td>Used for service principal authn.</td></tr><tr><td>aadClientCertPath</td><td>The path of a client certificate for an AAD application with RBAC access to talk to Azure RM APIs</td><td>Used for client cert authn.</td></tr><tr><td>aadClientCertPassword</td><td>The password of the client certificate for an AAD application with RBAC access to talk to Azure RM APIs</td><td>Used for client cert authn.</td></tr><tr><td>useManagedIdentityExtension</td><td>Use managed service identity for the virtual machine to access Azure ARM APIs</td><td>Boolean type, default to false.</td></tr><tr><td>userAssignedIdentityID</td><td>The Client ID of the user assigned MSI which is assigned to the underlying VMs</td><td>Required for user-assigned managed identity.</td></tr><tr><td>subscriptionId</td><td>The ID of the Azure Subscription that the cluster is deployed in</td><td><strong>Required</strong>.</td></tr><tr><td>identitySystem</td><td>The identity system for AzureStack. Supported values are: ADFS</td><td>Only used for AzureStack</td></tr><tr><td>networkResourceTenantID</td><td>The AAD Tenant ID for the Subscription that the network resources are deployed in</td><td>Optional. Supported since v1.18.0. Only used for hosting network resources in different AAD Tenant and Subscription than those for the cluster.</td></tr><tr><td>networkResourceSubscriptionID</td><td>The ID of the Azure Subscription that the network resources are deployed in</td><td>Optional. Supported since v1.18.0. Only used for hosting network resources in different AAD Tenant and Subscription than those for the cluster.</td></tr></tbody></table><p>Note: Cloud provider currently supports three authentication methods, you can choose one combination of them:</p><ul><li><a href=https://docs.microsoft.com/en-us/azure/active-directory/managed-service-identity/overview>Managed Identity</a>:<ul><li>For system-assigned managed identity: set <code>useManagedIdentityExtension</code> to true</li><li>For user-assigned managed identity: set <code>useManagedIdentityExtension</code> to true and also set <code>userAssignedIdentityID</code></li></ul></li><li><a href=https://github.com/Azure/aks-engine/blob/master/docs/topics/service-principals.md>Service Principal</a>: set <code>aadClientID</code> and <code>aadClientSecret</code></li><li><a href=https://docs.microsoft.com/en-us/azure/active-directory/develop/active-directory-protocols-oauth-service-to-service>Client Certificate</a>: set <code>aadClientCertPath</code> and <code>aadClientCertPassword</code></li></ul><p>If more than one value is set, the order is <code>Managed Identity</code> > <code>Service Principal</code> > <code>Client Certificate</code>.</p><h2 id=cluster-config>Cluster config</h2><table><thead><tr><th>Name</th><th>Description</th><th>Remark</th></tr></thead><tbody><tr><td>resourceGroup</td><td>The name of the resource group that the cluster is deployed in</td><td></td></tr><tr><td>location</td><td>The location of the resource group that the cluster is deployed in</td><td></td></tr><tr><td>vnetName</td><td>The name of the VNet that the cluster is deployed in</td><td></td></tr><tr><td>vnetResourceGroup</td><td>The name of the resource group that the Vnet is deployed in</td><td></td></tr><tr><td>subnetName</td><td>The name of the subnet that the cluster is deployed in</td><td></td></tr><tr><td>securityGroupName</td><td>The name of the security group attached to the cluster's subnet</td><td></td></tr><tr><td>routeTableName</td><td>The name of the route table attached to the subnet that the cluster is deployed in</td><td>Optional in 1.6</td></tr><tr><td>primaryAvailabilitySetName<a href=#primaryavailabilitysetname>*</a></td><td>The name of the availability set that should be used as the load balancer backend</td><td>Optional</td></tr><tr><td>vmType</td><td>The type of azure nodes. Candidate values are: <code>vmss</code> and <code>standard</code>|Optional, default to <code>standard</code>|</td><td></td></tr><tr><td>primaryScaleSetName<a href=#primaryscalesetname>*</a></td><td>The name of the scale set that should be used as the load balancer backend</td><td>Optional</td></tr><tr><td>cloudProviderBackoff</td><td>Enable exponential backoff to manage resource request retries</td><td>Boolean value, default to false</td></tr><tr><td>cloudProviderBackoffRetries</td><td>Backoff retry limit</td><td>Integer value, valid if <code>cloudProviderBackoff</code> is true</td></tr><tr><td>cloudProviderBackoffExponent</td><td>Backoff exponent</td><td>Float value, valid if <code>cloudProviderBackoff</code> is true</td></tr><tr><td>cloudProviderBackoffDuration</td><td>Backoff duration</td><td>Integer value, valid if <code>cloudProviderBackoff</code> is true</td></tr><tr><td>cloudProviderBackoffJitter</td><td>Backoff jitter</td><td>Float value, valid if <code>cloudProviderBackoff</code> is true</td></tr><tr><td>cloudProviderBackoffMode</td><td>Backoff mode, supported values are &ldquo;v2&rdquo; and &ldquo;default&rdquo;. Note that &ldquo;v2&rdquo; has been deprecated since v1.18.0.</td><td>Default to &ldquo;default&rdquo;</td></tr><tr><td>cloudProviderRateLimit</td><td>Enable rate limiting</td><td>Boolean value, default to false</td></tr><tr><td>cloudProviderRateLimitQPS</td><td>Rate limit QPS (Read)</td><td>Float value, valid if <code>cloudProviderRateLimit</code> is true</td></tr><tr><td>cloudProviderRateLimitBucket</td><td>Rate limit Bucket Size</td><td>Integar value, valid if <code>cloudProviderRateLimit</code> is true</td></tr><tr><td>cloudProviderRateLimitQPSWrite</td><td>Rate limit QPS (Write)</td><td>Float value, valid if <code>cloudProviderRateLimit</code> is true</td></tr><tr><td>cloudProviderRateLimitBucketWrite</td><td>Rate limit Bucket Size</td><td>Integer value, valid if <code>cloudProviderRateLimit</code> is true</td></tr><tr><td>useInstanceMetadata</td><td>Use instance metadata service where possible</td><td>Boolean value, default to false</td></tr><tr><td>loadBalancerSku</td><td>Sku of Load Balancer and Public IP. Candidate values are: <code>basic</code> and <code>standard</code>.</td><td>Default to <code>basic</code>.</td></tr><tr><td>loadBalancerResourceGroup</td><td>Resource group name of the load balancer user want to use, default value is the name of cluster's resource group</td><td>String value of rg's name, optional</td></tr><tr><td>loadBalancerName</td><td>The name of the load balancer user want to use. If not set, default naming pattern is used.</td><td>String value, optional</td></tr><tr><td>excludeMasterFromStandardLB</td><td>ExcludeMasterFromStandardLB excludes master nodes from standard load balancer.</td><td>Boolean value, default to true.</td></tr><tr><td>disableOutboundSNAT</td><td>Disable outbound SNAT for SLB</td><td>Default to false and available since v1.11.9, v1.12.7, v1.13.5 and v1.14.0</td></tr><tr><td>maximumLoadBalancerRuleCount</td><td>Maximum allowed LoadBalancer Rule Count is the limit enforced by Azure Load balancer</td><td>Integer value, default to <a href=https://github.com/kubernetes/kubernetes/blob/v1.10.0/pkg/cloudprovider/providers/azure/azure.go#L48>148</a></td></tr><tr><td>routeTableResourceGroup</td><td>The resource group name for routeTable</td><td>Default same as resourceGroup and available since v1.15.0</td></tr><tr><td>cloudConfigType</td><td>The cloud configure type for Azure cloud provider. Supported values are file, secret and merge.</td><td>Default to <code>merge</code>. and available since v1.15.0</td></tr><tr><td>loadBalancerName</td><td>Working together with loadBalancerResourceGroup to determine the LB name in a different resource group</td><td>Since v1.18.0</td></tr><tr><td>loadBalancerResourceGroup</td><td>The load balancer resource group name, which is different from node resource group</td><td>Since v1.18.0</td></tr><tr><td>disableAvailabilitySetNodes</td><td>Disable supporting for AvailabilitySet virtual machines in vmss cluster. It should be only used when vmType is &ldquo;vmss&rdquo; and all the nodes (including master) are VMSS virtual machines</td><td>Since v1.18.0</td></tr></tbody></table><h3 id=primaryavailabilitysetname>primaryAvailabilitySetName</h3><p>If this is set, the Azure cloudprovider will only add nodes from that availability set to the load
balancer backend pool. If this is not set, and multiple agent pools (availability sets) are used, then
the cloudprovider will try to add all nodes to a single backend pool which is forbidden.
In other words, if you use multiple agent pools (availability sets), you MUST set this field.</p><h3 id=primaryscalesetname>primaryScaleSetName</h3><p>If this is set, the Azure cloudprovider will only add nodes from that scale set to the load
balancer backend pool. If this is not set, and multiple agent pools (scale sets) are used, then
the cloudprovider will try to add all nodes to a single backend pool which is forbidden when using Load Balancer Basic SKU.
In other words, if you use multiple agent pools (scale sets), and <code>loadBalancerSku</code> is set to <code>basic</code> you MUST set this field.</p><h3 id=excludemasterfromstandardlb>excludeMasterFromStandardLB</h3><p>Master nodes are not added to the backends of Azure Load Balancer (ALB) if <code>excludeMasterFromStandardLB</code> is set.</p><p>By default, if nodes are labeled with <code>node-role.kubernetes.io/master</code>, they would also be excluded from ALB. If you want to add the master nodes to ALB, <code>excludeMasterFromStandardLB</code> should be set to false and label <code>node-role.kubernetes.io/master</code> should be removed if it has already been applied.</p><h3 id=setting-azure-cloud-provider-from-kubernetes-secrets>Setting Azure cloud provider from Kubernetes secrets</h3><p>Since v1.15.0, Azure cloud provider supports reading the cloud config from Kubernetes secrets. The secret is a serialized version of <code>azure.json</code> file with key <code>cloud-config</code>. The secret should be put in <code>kube-system</code> namespace and its name should be <code>azure-cloud-provider</code>.</p><p>To enable this feature, set <code>cloudConfigType</code> to <code>secret</code> or <code>merge</code> (default is <code>merge</code>). All supported values for this option are:</p><ul><li><code>file</code>: The cloud provider configuration is read from cloud-config file.</li><li><code>secret</code>: the cloud provider configuration must be overridden by the secret.</li><li><code>merge</code>: the cloud provider configuration can be optionally overridden by a secret when it is set explicitly in the secret, this is default value.</li></ul><p>Since Azure cloud provider would read Kubernetes secrets, the following RBAC should also be configured:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml>---<span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline></span>apiVersion<span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>rbac.authorization.k8s.io/v1beta1<span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline></span>kind<span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>ClusterRole<span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline></span>metadata<span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span>labels<span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span>kubernetes.io/cluster-service<span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#34;true&#34;</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span>name<span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>system<span style=color:#000;font-weight:700>:</span>azure-cloud-provider-secret-getter<span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline></span>rules<span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline></span>-<span style=color:#f8f8f8;text-decoration:underline> </span>apiGroups<span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>]</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span>resources<span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;secrets&#34;</span><span style=color:#000;font-weight:700>]</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span>resourceNames<span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;azure-cloud-provider&#34;</span><span style=color:#000;font-weight:700>]</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span>verbs<span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span>-<span style=color:#f8f8f8;text-decoration:underline> </span>get<span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline></span>---<span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline></span>apiVersion<span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>rbac.authorization.k8s.io/v1beta1<span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline></span>kind<span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>ClusterRoleBinding<span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline></span>metadata<span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span>labels<span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span>kubernetes.io/cluster-service<span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#34;true&#34;</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span>name<span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>system<span style=color:#000;font-weight:700>:</span>azure-cloud-provider-secret-getter<span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline></span>roleRef<span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span>apiGroup<span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>rbac.authorization.k8s.io<span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span>kind<span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>ClusterRole<span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span>name<span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>system<span style=color:#000;font-weight:700>:</span>azure-cloud-provider-secret-getter<span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline></span>subjects<span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline></span>-<span style=color:#f8f8f8;text-decoration:underline> </span>kind<span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>ServiceAccount<span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span>name<span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>azure-cloud-provider<span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span>namespace<span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>kube-system<span style=color:#f8f8f8;text-decoration:underline>
</span></code></pre></div><h3 id=per-client-rate-limiting>per client rate limiting</h3><p>Since v1.18.0, the original global rate limiting has been switched to per-client. A set of new rate limit configure options are introduced for each client, which includes:</p><ul><li>routeRateLimit</li><li>SubnetsRateLimit</li><li>InterfaceRateLimit</li><li>RouteTableRateLimit</li><li>LoadBalancerRateLimit</li><li>PublicIPAddressRateLimit</li><li>SecurityGroupRateLimit</li><li>VirtualMachineRateLimit</li><li>StorageAccountRateLimit</li><li>DiskRateLimit</li><li>SnapshotRateLimit</li><li>VirtualMachineScaleSetRateLimit</li><li>VirtualMachineSizeRateLimit</li></ul><p>The original rate limiting options (&ldquo;cloudProviderRateLimitBucket&rdquo;, &ldquo;cloudProviderRateLimitBucketWrite&rdquo;, &ldquo;cloudProviderRateLimitQPS&rdquo;, &ldquo;cloudProviderRateLimitQPSWrite&rdquo;) are still supported, and they would be the default values if per-client rate limiting is not configured.</p><p>Here is an example of per-client config:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=color:#000;font-weight:700>{</span>
  <span style=color:#a40000>/</span><span style=color:#a40000>/</span> <span style=color:#a40000>d</span><span style=color:#a40000>e</span><span style=color:#a40000>f</span><span style=color:#a40000>a</span><span style=color:#a40000>u</span><span style=color:#a40000>l</span><span style=color:#a40000>t</span> <span style=color:#a40000>r</span><span style=color:#a40000>a</span><span style=color:#a40000>t</span><span style=color:#a40000>e</span> <span style=color:#a40000>l</span><span style=color:#a40000>i</span><span style=color:#a40000>m</span><span style=color:#a40000>i</span><span style=color:#a40000>t</span> <span style=color:#a40000>(</span><span style=color:#a40000>e</span><span style=color:#a40000>n</span><span style=color:#a40000>a</span><span style=color:#a40000>b</span><span style=color:#a40000>l</span><span style=color:#a40000>e</span><span style=color:#a40000>d</span><span style=color:#a40000>)</span><span style=color:#a40000>.</span>
  <span style=color:#204a87;font-weight:700>&#34;cloudProviderRatelimit&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#204a87;font-weight:700>&#34;cloudProviderRateLimitBucket&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#204a87;font-weight:700>&#34;cloudProviderRateLimitBucketWrite&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#204a87;font-weight:700>&#34;cloudProviderRateLimitQPS&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#204a87;font-weight:700>&#34;cloudProviderRateLimitQPSWrite&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#204a87;font-weight:700>&#34;virtualMachineScaleSetRateLimit&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>  <span style=color:#a40000>/</span><span style=color:#a40000>/</span> <span style=color:#a40000>V</span><span style=color:#a40000>M</span><span style=color:#a40000>S</span><span style=color:#a40000>S</span> <span style=color:#a40000>s</span><span style=color:#a40000>p</span><span style=color:#a40000>e</span><span style=color:#a40000>c</span><span style=color:#a40000>i</span><span style=color:#a40000>f</span><span style=color:#a40000>i</span><span style=color:#a40000>c</span> <span style=color:#a40000>(</span><span style=color:#a40000>e</span><span style=color:#a40000>n</span><span style=color:#a40000>a</span><span style=color:#a40000>b</span><span style=color:#a40000>l</span><span style=color:#a40000>e</span><span style=color:#a40000>d</span><span style=color:#a40000>)</span><span style=color:#a40000>.</span>
    <span style=color:#204a87;font-weight:700>&#34;cloudProviderRatelimit&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;cloudProviderRateLimitBucket&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;CloudProviderRateLimitBucketWrite&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;cloudProviderRateLimitQPS&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;CloudProviderRateLimitQPSWrite&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>0</span>
  <span style=color:#000;font-weight:700>}</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#204a87;font-weight:700>&#34;loadBalancerRateLimit&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>  <span style=color:#a40000>/</span><span style=color:#a40000>/</span> <span style=color:#a40000>L</span><span style=color:#a40000>B</span> <span style=color:#a40000>s</span><span style=color:#a40000>p</span><span style=color:#a40000>e</span><span style=color:#a40000>c</span><span style=color:#a40000>i</span><span style=color:#a40000>f</span><span style=color:#a40000>i</span><span style=color:#a40000>c</span> <span style=color:#a40000>(</span><span style=color:#a40000>d</span><span style=color:#a40000>i</span><span style=color:#a40000>s</span><span style=color:#a40000>a</span><span style=color:#a40000>b</span><span style=color:#a40000>l</span><span style=color:#a40000>e</span><span style=color:#a40000>d</span><span style=color:#a40000>)</span>
    <span style=color:#204a87;font-weight:700>&#34;cloudProviderRatelimit&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span>
  <span style=color:#000;font-weight:700>}</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#a40000>.</span><span style=color:#a40000>.</span><span style=color:#a40000>.</span> <span style=color:#a40000>/</span><span style=color:#a40000>/</span> <span style=color:#a40000>o</span><span style=color:#a40000>t</span><span style=color:#a40000>h</span><span style=color:#a40000>e</span><span style=color:#a40000>r</span> <span style=color:#a40000>c</span><span style=color:#a40000>l</span><span style=color:#a40000>o</span><span style=color:#a40000>u</span><span style=color:#a40000>d</span> <span style=color:#a40000>p</span><span style=color:#a40000>r</span><span style=color:#a40000>o</span><span style=color:#a40000>v</span><span style=color:#a40000>i</span><span style=color:#a40000>d</span><span style=color:#a40000>e</span><span style=color:#a40000>r</span> <span style=color:#a40000>c</span><span style=color:#a40000>o</span><span style=color:#a40000>n</span><span style=color:#a40000>f</span><span style=color:#a40000>i</span><span style=color:#a40000>g</span><span style=color:#a40000>s</span>
<span style=color:#000;font-weight:700>}</span>
</code></pre></div><h2 id=run-kubelet-without-azure-identity>Run Kubelet without Azure identity</h2><p>When running Kubelet with kube-controller-manager, it also supports running without Azure identity since v1.15.0.</p><p>Both kube-controller-manager and kubelet should configure <code>--cloud-provider=azure --cloud-config=/etc/kubernetes/azure.json</code>, but the contents for <code>azure.json</code> are different:</p><p>(1) For kube-controller-manager, refer the above part for setting <code>azure.json</code>.</p><p>(2) For kubelet, <code>useInstanceMetadata</code> is required to be <code>true</code> and Azure identities are not required. A sample for Kubelet's azure.json is</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=color:#000;font-weight:700>{</span>
  <span style=color:#204a87;font-weight:700>&#34;useInstanceMetadata&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#204a87;font-weight:700>&#34;vmType&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;vmss&#34;</span>
<span style=color:#000;font-weight:700>}</span>
</code></pre></div><h2 id=azure-stack-configuration>Azure Stack Configuration</h2><p>Azure Stack has different API endpoints, depending on the Azure Stack deployment. These need to be provided to the Azure SDK and currently this is done by adding an extra <code>json</code> file with the arguments, as well as an environment variable pointing to this file.</p><p>There are several available presets, namely:</p><ul><li><code>AzureChinaCloud</code></li><li><code>AzureGermanCloud</code></li><li><code>AzurePublicCloud</code></li><li><code>AzureUSGovernmentCloud</code></li></ul><p>These are determined using <code>cloud: &lt;PRESET></code> described above in the description of <code>azure.json</code>.</p><p>When <code>cloud: AzureStackCloud</code>, the extra environment variable used by the Azure SDK to find the Azure Stack configuration file is:</p><ul><li><a href=https://github.com/Azure/go-autorest/blob/562d376/autorest/azure/environments.go#L28><code>AZURE_ENVIRONMENT_FILEPATH</code></a></li></ul><p>The configuration parameters of this file:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=color:#000;font-weight:700>{</span>
  <span style=color:#204a87;font-weight:700>&#34;name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;AzureStackCloud&#34;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#204a87;font-weight:700>&#34;managementPortalURL&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;...&#34;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#204a87;font-weight:700>&#34;publishSettingsURL&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;...&#34;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#204a87;font-weight:700>&#34;serviceManagementEndpoint&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;...&#34;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#204a87;font-weight:700>&#34;resourceManagerEndpoint&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;...&#34;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#204a87;font-weight:700>&#34;activeDirectoryEndpoint&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;...&#34;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#204a87;font-weight:700>&#34;galleryEndpoint&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;...&#34;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#204a87;font-weight:700>&#34;keyVaultEndpoint&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;...&#34;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#204a87;font-weight:700>&#34;graphEndpoint&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;...&#34;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#204a87;font-weight:700>&#34;serviceBusEndpoint&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;...&#34;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#204a87;font-weight:700>&#34;batchManagementEndpoint&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;...&#34;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#204a87;font-weight:700>&#34;storageEndpointSuffix&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;...&#34;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#204a87;font-weight:700>&#34;sqlDatabaseDNSSuffix&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;...&#34;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#204a87;font-weight:700>&#34;trafficManagerDNSSuffix&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;...&#34;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#204a87;font-weight:700>&#34;keyVaultDNSSuffix&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;...&#34;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#204a87;font-weight:700>&#34;serviceBusEndpointSuffix&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;...&#34;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#204a87;font-weight:700>&#34;serviceManagementVMDNSSuffix&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;...&#34;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#204a87;font-weight:700>&#34;resourceManagerVMDNSSuffix&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;...&#34;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#204a87;font-weight:700>&#34;containerRegistryDNSSuffix&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;...&#34;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#204a87;font-weight:700>&#34;cosmosDBDNSSuffix&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;...&#34;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#204a87;font-weight:700>&#34;tokenAudience&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;...&#34;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#204a87;font-weight:700>&#34;resourceIdentifiers&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
    <span style=color:#204a87;font-weight:700>&#34;graph&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;...&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;keyVault&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;...&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;datalake&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;...&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;batch&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;...&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;operationalInsights&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;...&#34;</span>
  <span style=color:#000;font-weight:700>}</span>
<span style=color:#000;font-weight:700>}</span>
</code></pre></div><p>The full list of existing settings for the <code>AzureChinaCloud</code>, <code>AzureGermanCloud</code>, <code>AzurePublicCloud</code> and <code>AzureUSGovernmentCloud</code> is available in the source code at <a href=https://github.com/Azure/go-autorest/blob/master/autorest/azure/environments.go#L51>https://github.com/Azure/go-autorest/blob/master/autorest/azure/environments.go#L51</a>.</p><h2 id=host-network-resources-in-different-aad-tenant-and-subscription>Host Network Resources in different AAD Tenant and Subscription</h2><p>Since v1.18.0, Azure cloud provider supports hosting network resources (Virtual Network, Network Security Group, Route Table, Load Balancer and Public IP) in different AAD Tenant and Subscription than those for the cluster. To enable this feature, set <code>networkResourceTenantID</code> and <code>networkResourceSubscriptionID</code> in auth config. Note that the value of them need to be different than value of <code>tenantID</code> and <code>subscriptionID</code>.</p><p>With this feature enabled, network resources of the cluster will be created in <code>networkResourceSubscriptionID</code> in <code>networkResourceTenantID</code>, and rest resources of the cluster still remain in <code>subscriptionID</code> in <code>tenantID</code>. Properties which specify the resource groups of network resources are compatible with this feature. For example, Virtual Network will be created in <code>vnetResourceGroup</code> in <code>networkResourceSubscriptionID</code> in <code>networkResourceTenantID</code>.</p><p>For authentication methods, only Service Principal supports this feature, and <code>aadClientID</code> and <code>aadClientSecret</code> are used to authenticate with those two AAD Tenants and Subscriptions. Managed Identity and Client Certificate doesn't support this feature. Azure Stack doesn't support this feature.</p><h2 id=current-default-rate-limiting-values>Current default rate-limiting values</h2><p>The following are the default rate limiting values configured in <a href=https://azure.microsoft.com/en-us/services/kubernetes-service/>AKS</a> and <a href=https://github.com/Azure/aks-engine>AKS-Engine</a> clusters prior to Kubernetes version v1.18.0.</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>    <span style=color:#4e9a06>&#34;cloudProviderBackoff&#34;</span><span style=color:#a40000>:</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#a40000>,</span>
    <span style=color:#4e9a06>&#34;cloudProviderBackoffRetries&#34;</span><span style=color:#a40000>:</span> <span style=color:#0000cf;font-weight:700>6</span><span style=color:#a40000>,</span>
    <span style=color:#4e9a06>&#34;cloudProviderBackoffDuration&#34;</span><span style=color:#a40000>:</span> <span style=color:#0000cf;font-weight:700>5</span><span style=color:#a40000>,</span>
    <span style=color:#4e9a06>&#34;cloudProviderRatelimit&#34;</span><span style=color:#a40000>:</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#a40000>,</span>
    <span style=color:#4e9a06>&#34;cloudProviderRateLimitQPS&#34;</span><span style=color:#a40000>:</span> <span style=color:#0000cf;font-weight:700>10</span><span style=color:#a40000>,</span>
    <span style=color:#4e9a06>&#34;cloudProviderRateLimitBucket&#34;</span><span style=color:#a40000>:</span> <span style=color:#0000cf;font-weight:700>100</span><span style=color:#a40000>,</span>
    <span style=color:#4e9a06>&#34;cloudProviderRatelimitQPSWrite&#34;</span><span style=color:#a40000>:</span> <span style=color:#0000cf;font-weight:700>10</span><span style=color:#a40000>,</span>
    <span style=color:#4e9a06>&#34;cloudProviderRatelimitBucketWrite&#34;</span><span style=color:#a40000>:</span> <span style=color:#0000cf;font-weight:700>100</span><span style=color:#a40000>,</span>
</code></pre></div><p>For v1.18.0+ refer to <a href=#per-client-rate-limiting>per client rate limit config</a></p><style>.feedback--answer{display:inline-block}.feedback--answer-no{margin-left:1em}.feedback--response{display:none;margin-top:1em}.feedback--response__visible{display:block}</style><h2 class=feedback--title>Feedback</h2><p class=feedback--question>Was this page helpful?</p><button class="feedback--answer feedback--answer-yes">Yes</button>
<button class="feedback--answer feedback--answer-no">No</button><p class="feedback--response feedback--response-yes">Glad to hear it! Please <a href=https://github.com/USERNAME/REPOSITORY/issues/new>tell us how we can improve</a>.</p><p class="feedback--response feedback--response-no">Sorry to hear that. Please <a href=https://github.com/USERNAME/REPOSITORY/issues/new>tell us how we can improve</a>.</p><script>const yesButton=document.querySelector('.feedback--answer-yes');const noButton=document.querySelector('.feedback--answer-no');const yesResponse=document.querySelector('.feedback--response-yes');const noResponse=document.querySelector('.feedback--response-no');const disableButtons=()=>{yesButton.disabled=true;noButton.disabled=true;};const sendFeedback=(value)=>{if(typeof ga!=='function')return;const args={command:'send',hitType:'event',category:'Helpful',action:'click',label:window.location.pathname,value:value};ga(args.command,args.hitType,args.category,args.action,args.label,args.value);};yesButton.addEventListener('click',()=>{yesResponse.classList.add('feedback--response__visible');disableButtons();sendFeedback(1);});noButton.addEventListener('click',()=>{noResponse.classList.add('feedback--response__visible');disableButtons();sendFeedback(0);});</script><br><div class="text-muted mt-5 pt-3 border-top">Last modified August 17, 2020: <a href=https://github.com/kubernetes-sigs/cloud-provider-azure/commit/d4ac306d4f443b8bca88deba66a90357c5792c14>Refine doc website (d4ac306d)</a></div></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Google Group" aria-label="Google Group"><a class=text-white target=_blank href=https://groups.google.com/forum/#!forum/kubernetes-sig-cloud-provider><i class="fa fa-envelope"></i></a></li></ul></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank href=https://github.com/kubernetes-sigs/cloud-provider-azure><i class="fab fa-github"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2020 The Docsy Authors All Rights Reserved</small>
<small class=ml-1><a href=https://policies.google.com/privacy target=_blank>Privacy Policy</a></small></div></div></div></footer></div><script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js integrity=sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49 crossorigin=anonymous></script><script src=https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js integrity=sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy crossorigin=anonymous></script><script src=/cloud-provider-azure/js/main.min.c804b36e9989ce787003fa1ab274ecaebc0c3eb0e2253094a39d5ea77cf46298.js integrity="sha256-yASzbpmJznhwA/oasnTsrrwMPrDiJTCUo51ep3z0Ypg=" crossorigin=anonymous></script></body></html>